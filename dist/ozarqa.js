class OzarqaBarChart{constructor(t,e,s){this.svg=t,this.data=s,this.args=e,this.dataValues=this.data.map(function(t){return t.value})}draw(){var e=Math.max(...this.dataValues),s=this.args.canvas.width,a=this.args.canvas.height,i=(s-this.args.barSpacing*(this.data.length-1))/this.data.length,r=a/e;if(this.args.barShowHorizintalLines)for(let t=1;t<=e;t+=Math.round(e/5)){var h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("transform","translate(30 30)"),h.setAttribute("x1",0),h.setAttribute("y1",a-t*r),h.setAttribute("x2",s),h.setAttribute("y2",a-t*r),h.setAttribute("stroke","black"),h.setAttribute("stroke-width","1"),this.svg.appendChild(h)}if(this.args.showGuide){var n=document.createElementNS("http://www.w3.org/2000/svg","g");n.classList.add("ozarqaGuide"),n.setAttribute("transform","translate(0 60)"),n.setAttribute("width",s),n.setAttribute("height",a),this.svg.appendChild(n);for(let t=0;t<this.data.length;t++){var d=document.createElementNS("http://www.w3.org/2000/svg","g"),l=(n.appendChild(d),this.data[t]),o=document.createElementNS("http://www.w3.org/2000/svg","rect"),o=(o.setAttribute("x",0),o.setAttribute("y",a),o.setAttribute("width",30),o.setAttribute("height",20),o.setAttribute("fill",this.data[t].color),d.appendChild(o),document.createElementNS("http://www.w3.org/2000/svg","text"));o.setAttribute("x",0),o.setAttribute("y",a+30),o.setAttribute("text-anchor","middle"),o.textContent=l.label,d.appendChild(o)}}var g=document.createElementNS("http://www.w3.org/2000/svg","g");g.classList.add("ozarqaVisualization"),g.setAttribute("transform","translate(30 30)"),g.setAttribute("width",s),g.setAttribute("height",a),this.svg.appendChild(g);for(let t=0;t<this.data.length;t++){var u=document.createElementNS("http://www.w3.org/2000/svg","g"),c=(u.classList.add("ozarqaItemGroup"),g.appendChild(u),this.data[t].value),w=c*r,b=i,v=t*(b+this.args.barSpacing),A=a-w,p=document.createElementNS("http://www.w3.org/2000/svg","rect");p.setAttribute("x",v),p.setAttribute("y",A),p.setAttribute("width",b),p.setAttribute("height",w),p.setAttribute("fill",this.data[t].color),u.appendChild(p),void 0!==this.data[t].hoverText&&((p=document.createElementNS("http://www.w3.org/2000/svg","text")).classList.add("ozarqaHoverText"),p.setAttribute("x",v+b/2),p.setAttribute("y",A+w/2),void 0!==this.data[t].hoverTextColor&&p.setAttribute("fill",this.data[t].hoverTextColor),p.setAttribute("text-anchor","middle"),p.textContent=this.data[t].hoverText,u.appendChild(p)),this.args.barHideLabel||((w=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("x",v+b/2),w.setAttribute("y",A-5),w.setAttribute("text-anchor","middle"),w.textContent=c.toString(),u.appendChild(w))}if(!this.args.hideAxis){this.svg.classList.add("ozarqaAxisEnabled");var m=document.createElementNS("http://www.w3.org/2000/svg","g"),x=(m.classList.add("ozarqaAxis"),m.setAttribute("transform","translate(30 30)"),this.svg.appendChild(m),i),t=document.createElementNS("http://www.w3.org/2000/svg","line"),t=(t.setAttribute("x1",0),t.setAttribute("y1",a),t.setAttribute("x2",s),t.setAttribute("y2",a),t.setAttribute("stroke","black"),t.setAttribute("stroke-width","1"),m.appendChild(t),document.createElementNS("http://www.w3.org/2000/svg","line"));t.setAttribute("x1",0),t.setAttribute("y1",0),t.setAttribute("x2",0),t.setAttribute("y2",a),t.setAttribute("stroke","black"),t.setAttribute("stroke-width","1"),m.appendChild(t);for(let t=0;t<this.data.length;t++){var C=document.createElementNS("http://www.w3.org/2000/svg","text");C.setAttribute("x",t*(x+this.args.barSpacing)+x/2),C.setAttribute("y",a+15),C.setAttribute("text-anchor","middle"),C.textContent=t.toString(),m.appendChild(C)}for(let t=0;t<=e;t+=Math.round(e/5)){var S=document.createElementNS("http://www.w3.org/2000/svg","text");S.setAttribute("x",-5),S.setAttribute("y",a-t*r),S.setAttribute("text-anchor","end"),S.setAttribute("alignment-baseline","middle"),S.textContent=t.toString(),m.appendChild(S)}}}}class OzarqaLineChart{constructor(t,e,s){this.svg=t,this.data=s,this.args=e,this.dataValues=this.data.map(function(t){return t.value})}draw(){var e=Math.max(...this.dataValues),s=this.args.canvas.width;let a=this.args.canvas.height;const i=s/(this.data.length-1),r=a/e;if(this.args.showHorizintalLines)for(let t=1;t<=e;t+=Math.round(e/5)){var h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("transform","translate(30 30)"),h.setAttribute("x1",0),h.setAttribute("y1",a-t*r),h.setAttribute("x2",s),h.setAttribute("y2",a-t*r),h.setAttribute("stroke","black"),h.setAttribute("stroke-width","1"),this.svg.appendChild(h)}var t=document.createElementNS("http://www.w3.org/2000/svg","g"),n=(t.classList.add("ozarqaVisualization"),t.setAttribute("transform","translate(30 30)"),t.setAttribute("width",s),t.setAttribute("height",a),this.svg.appendChild(t),this.data.map((t,e)=>e*i+","+(a-t.value*r)).join(" ")),d=document.createElementNS("http://www.w3.org/2000/svg","polyline");if(d.setAttribute("points",n),d.setAttribute("fill","none"),d.setAttribute("stroke","blue"),d.setAttribute("stroke-width","2"),t.appendChild(d),!this.args.hideAxis){this.svg.classList.add("ozarqaAxisEnabled");var l=document.createElementNS("http://www.w3.org/2000/svg","g"),n=(l.classList.add("ozarqaAxis"),l.setAttribute("transform","translate(30 30)"),this.svg.appendChild(l),document.createElementNS("http://www.w3.org/2000/svg","line")),t=(n.setAttribute("x1",0),n.setAttribute("y1",a),n.setAttribute("x2",s),n.setAttribute("y2",a),n.setAttribute("stroke","black"),n.setAttribute("stroke-width","1"),l.appendChild(n),document.createElementNS("http://www.w3.org/2000/svg","line"));t.setAttribute("x1",0),t.setAttribute("y1",0),t.setAttribute("x2",0),t.setAttribute("y2",a),t.setAttribute("stroke","black"),t.setAttribute("stroke-width","1"),l.appendChild(t);for(let t=0;t<this.data.length;t++){var o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttribute("x",t*i),o.setAttribute("y",a+15),o.setAttribute("text-anchor","middle"),o.textContent=t.toString(),l.appendChild(o)}for(let t=0;t<=e;t+=Math.round(e/5)){var g=document.createElementNS("http://www.w3.org/2000/svg","text");g.setAttribute("x",-5),g.setAttribute("y",a-t*r),g.setAttribute("text-anchor","end"),g.setAttribute("alignment-baseline","middle"),g.textContent=t.toString(),l.appendChild(g)}}}}class OzarqaPieChart{constructor(t,e,s){this.args=e,this.svg=t,this.data=s,this.dataValues=this.data.map(function(t){return t.value})}draw(){var e=this.dataValues.reduce((t,e)=>t+e,0);let s=0;var a=this.args.canvas.width/2,i=this.args.canvas.height/2,r=Math.min(a,i);for(let t=0;t<this.data.length;t++){var h=2*Math.PI*this.data[t].value/e,n=document.createElementNS("http://www.w3.org/2000/svg","path"),d=a+r*Math.cos(s+h),l=i+r*Math.sin(s+h),o=h>Math.PI?1:0,o=`M ${a} ${i}
                        L ${a+r*Math.cos(s)} ${i+r*Math.sin(s)}
                        A ${r} ${r} 0 ${o} 1 ${d} ${l}
                        Z`,d=(n.setAttribute("d",o),n.setAttribute("fill",this.data[t].color),this.svg.appendChild(n),a+r/2*Math.cos(s+h/2)),l=i+r/2*Math.sin(s+h/2),o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttribute("x",d),o.setAttribute("y",l),o.setAttribute("fill",this.data[t].labelColor),o.setAttribute("text-anchor","middle"),o.textContent=this.data[t].label.toString(),this.svg.appendChild(o),s+=h}}}class Ozarqa{constructor(t,e){if(void 0===(t={showGuide:!1,barShowHorizintalLines:!1,barHideAxis:!1,barHideLabel:!1,barSpacing:0,...t}).svgSelector)console.warn("Missing svgId parameter.");else if(void 0===t.chartType)console.warn("Missing chartType parameter.");else if(void 0===e)console.warn("Missing data parameter.");else if(0===typeof e.length)console.warn("data empty.");else{var s=t.svgSelector.slice(0,1),a=t.svgSelector.substring(1);switch(s){case"#":this.svg=document.getElementById(a);break;case".":this.svg=document.getElementsByClassName(a);break;default:this.svg=document.querySelectorAll(t.svgId)}void 0!==this.svg[0]&&(this.svg=this.svg[0]),this.args=t,this.data=e,this.resizeObserver=new ResizeObserver(this.run.bind(this)),this.resizeObserver.observe(this.svg),this.run(),window.addEventListener("resize",this.run.bind(this))}}run(){switch(this.args.canvas={width:args.barHideAxis?this.svg.clientWidth:this.svg.clientWidth-60,height:args.barHideAxis?this.svg.clientHeight:this.svg.clientHeight-60},this.args.showGuide&&(this.args.canvas.height-=60),this.svg.innerHTML="",this.svg.classList.add("ozarqa"),this.svg.classList.add("ozarqa_"+this.args.chartType),this.args.chartType){case"line":new OzarqaLineChart(this.svg,this.args,this.data).draw();break;case"bars":new OzarqaBarChart(this.svg,this.args,this.data).draw();break;case"pie":this.args.canvas={width:(args.barHideAxis,this.svg.clientWidth),height:(args.barHideAxis,this.svg.clientWidth)},this.svg.setAttribute("height",this.args.canvas.width),new OzarqaPieChart(this.svg,this.args,this.data).draw()}}}