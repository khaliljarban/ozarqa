class OzarqaBarsChart{constructor(t,e,s){this.svg=t,this.container=e.helpers.container,this.data=s,this.args=e,this.dataValues=this.data.map(function(t){return t.value})}draw(){var e=Math.max(...this.dataValues),s=this.args.canvas.width,i=this.args.canvas.height,a=(s-this.args.barSpacing*(this.data.length-1))/this.data.length,r=i/e;if(this.args.barShowHorizintalLines)for(let t=1;t<=e;t+=Math.round(e/this.args.axisScaleUnit)){var h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("transform","translate(30 30)"),h.setAttribute("x1",0),h.setAttribute("y1",i-t*r),h.setAttribute("x2",s),h.setAttribute("y2",i-t*r),h.setAttribute("stroke",this.args.horizintalLinesColors),h.setAttribute("stroke-width","1"),this.svg.appendChild(h)}var l=document.createElementNS("http://www.w3.org/2000/svg","g");l.classList.add("ozarqaVisualization"),l.setAttribute("transform","translate(30 30)"),l.setAttribute("width",s),l.setAttribute("height",i),this.svg.appendChild(l);for(let t=0;t<this.data.length;t++){var n=document.createElementNS("http://www.w3.org/2000/svg","g"),o=(n.classList.add("ozarqaItemGroup"),l.appendChild(n),this.data[t].value),d=o*r,u=a,c=t*(u+this.args.barSpacing),g=i-d,A=document.createElementNS("http://www.w3.org/2000/svg","rect");A.setAttribute("x",c),A.setAttribute("y",g),A.setAttribute("width",u),A.setAttribute("height",d),A.setAttribute("fill",this.data[t].color),n.appendChild(A),void 0!==this.data[t].hoverText&&((A=document.createElementNS("http://www.w3.org/2000/svg","text")).classList.add("ozarqaHoverText"),A.setAttribute("x",c+u/2),A.setAttribute("y",g+d/2),void 0!==this.data[t].hoverTextColor&&A.setAttribute("fill",this.data[t].hoverTextColor),A.setAttribute("text-anchor","middle"),A.textContent=this.data[t].hoverText,n.appendChild(A)),this.args.barHideLabel||((d=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("x",c+u/2),d.setAttribute("y",g-5),d.setAttribute("text-anchor","middle"),d.textContent=o.toString(),n.appendChild(d))}if(!this.args.hideAxis){this.svg.classList.add("ozarqaAxisEnabled");var w=document.createElementNS("http://www.w3.org/2000/svg","g"),b=(w.classList.add("ozarqaAxis"),w.setAttribute("transform","translate(30 30)"),this.svg.appendChild(w),a),t=document.createElementNS("http://www.w3.org/2000/svg","line"),t=(t.setAttribute("x1",0),t.setAttribute("y1",i),t.setAttribute("x2",s),t.setAttribute("y2",i),t.setAttribute("stroke","#787878"),t.setAttribute("stroke-width","1"),w.appendChild(t),document.createElementNS("http://www.w3.org/2000/svg","line"));t.setAttribute("x1",0),t.setAttribute("y1",0),t.setAttribute("x2",0),t.setAttribute("y2",i),t.setAttribute("stroke","#787878"),t.setAttribute("stroke-width","1"),w.appendChild(t);for(let t=0;t<this.data.length;t+=Math.round(this.data.length/this.args.axisScaleUnit)){var m=document.createElementNS("http://www.w3.org/2000/svg","text");m.setAttribute("x",t*(b+this.args.barSpacing)+b/2),m.setAttribute("y",i+15),m.setAttribute("text-anchor","middle"),m.textContent=this.data[t].label,m.setAttribute("fill","#787878"),w.appendChild(m)}for(let t=0;t<=e;t+=Math.round(e/this.args.axisScaleUnit)){var x=document.createElementNS("http://www.w3.org/2000/svg","text");x.setAttribute("x",-5),x.setAttribute("y",i-t*r),x.setAttribute("text-anchor","end"),x.setAttribute("alignment-baseline","middle"),x.textContent=t.toString(),x.setAttribute("fill","#787878"),w.appendChild(x)}}}}class OzarqaBubblesChart{constructor(t,e,s){this.container=e.helpers.container,this.svg=t,this.data=s,this.args=e}draw(){if(this.maxAllValueX=0,this.maxAllValueY=0,this.maxAllValue=0,this.data.forEach(t=>{var t=t.data,e=t.map(function(t){return t.x}),s=t.map(function(t){return t.y}),t=t.map(function(t){return t.value}),e=Math.max(...e),e=(e>this.maxAllValueX&&(this.maxAllValueX=e),Math.max(...s)),s=(e>this.maxAllValueY&&(this.maxAllValueY=e),Math.max(...t));s>this.maxAllValue&&(this.maxAllValue=s)}),this.maxAllValueX+=5,this.maxAllValueY+=5,this.width=this.args.canvas.width,this.height=this.args.canvas.height,this.xScale=this.width/this.maxAllValueX,this.yScale=this.height/this.maxAllValueY,this.args.showHorizintalLines)for(let t=0;t<=this.maxAllValueY;t+=Math.round(this.maxAllValueY/this.args.axisScaleUnit)){var e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("transform","translate(30 30)"),e.setAttribute("x1",0),e.setAttribute("y1",this.height-t*this.yScale),e.setAttribute("x2",this.width),e.setAttribute("y2",this.height-t*this.yScale),e.setAttribute("stroke",this.args.horizintalLinesColors),e.setAttribute("stroke-width",0===t?"0":"1"),this.svg.appendChild(e)}if(this.data.forEach(r=>{var t=r.data;let h=document.createElementNS("http://www.w3.org/2000/svg","g");h.classList.add("ozarqaVisualization"),h.setAttribute("transform","translate(30 30)"),h.setAttribute("width",this.width),h.setAttribute("height",this.height),this.svg.appendChild(h),t.forEach(t=>{var e=t.value/this.maxAllValue*50,s=t.x,i=t.y,a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx",s*this.xScale),a.setAttribute("cy",this.height-i*this.yScale),a.setAttribute("opacity",.6),a.setAttribute("r",e),a.setAttribute("data-x",s),a.setAttribute("data-y",i),a.setAttribute("data-value",t.value),a.setAttribute("fill",r.color),h.appendChild(a)})}),!this.args.hideAxis){this.svg.classList.add("ozarqaAxisEnabled");var s=document.createElementNS("http://www.w3.org/2000/svg","g"),t=(s.classList.add("ozarqaAxis"),s.setAttribute("transform","translate(30 30)"),this.svg.appendChild(s),document.createElementNS("http://www.w3.org/2000/svg","line")),t=(t.setAttribute("x1",0),t.setAttribute("y1",this.height),t.setAttribute("x2",this.width),t.setAttribute("y2",this.height),t.setAttribute("stroke","#787878"),t.setAttribute("stroke-width","1"),s.appendChild(t),document.createElementNS("http://www.w3.org/2000/svg","line"));t.setAttribute("x1",0),t.setAttribute("y1",0),t.setAttribute("x2",0),t.setAttribute("y2",this.height),t.setAttribute("stroke","#787878"),t.setAttribute("stroke-width","1"),s.appendChild(t);for(let t=0;t<this.maxAllValueX;t+=Math.round(this.maxAllValueX/this.args.axisScaleUnit)){var i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("x",t*this.xScale),i.setAttribute("y",this.height+15),i.setAttribute("text-anchor","middle"),i.setAttribute("fill","#787878"),i.textContent=t.toString(),s.appendChild(i)}for(let t=0;t<=this.maxAllValueY;t+=Math.round(this.maxAllValueY/this.args.axisScaleUnit)){var a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("x",-5),a.setAttribute("y",this.height-t*this.yScale),a.setAttribute("text-anchor","end"),a.setAttribute("alignment-baseline","middle"),a.setAttribute("fill","#787878"),a.textContent=t.toString(),s.appendChild(a)}}}}class OzarqaLinesChart{constructor(t,e,s){this.container=e.helpers.container,this.svg=t,this.data=s,this.args=e}draw(){if(this.maxAllValueX=0,this.maxAllValueY=0,this.data.forEach(t=>{var t=t.data,e=t.map(function(t){return t.x}),t=t.map(function(t){return t.y}),e=Math.max(...e),e=(e>this.maxAllValueX&&(this.maxAllValueX=e),Math.max(...t));e>this.maxAllValueY&&(this.maxAllValueY=e)}),this.maxAllValueX+=5,this.maxAllValueY+=5,this.width=this.args.canvas.width,this.height=this.args.canvas.height,this.xScale=this.width/this.maxAllValueX,this.yScale=this.height/this.maxAllValueY,this.args.showHorizintalLines)for(let t=0;t<=this.maxAllValueY;t+=Math.round(this.maxAllValueY/this.args.axisScaleUnit)){var e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("transform","translate(30 30)"),e.setAttribute("x1",0),e.setAttribute("y1",this.height-t*this.yScale),e.setAttribute("x2",this.width),e.setAttribute("y2",this.height-t*this.yScale),e.setAttribute("stroke",this.args.horizintalLinesColors),e.setAttribute("stroke-width",0===t?"0":"1"),this.svg.appendChild(e)}if(this.data.forEach(t=>{var e=t.data,s=document.createElementNS("http://www.w3.org/2000/svg","g"),e=(s.classList.add("ozarqaVisualization"),s.setAttribute("transform","translate(30 30)"),s.setAttribute("width",this.width),s.setAttribute("height",this.height),this.svg.appendChild(s),console.log("dataItem",e),e.map((t,e)=>t.x*this.xScale+","+(this.height-t.y*this.yScale)).join(" ")),i=document.createElementNS("http://www.w3.org/2000/svg","polyline");i.setAttribute("points",e),i.setAttribute("fill","none"),i.setAttribute("stroke",t.color),i.setAttribute("stroke-width","2"),s.appendChild(i)}),!this.args.hideAxis){this.svg.classList.add("ozarqaAxisEnabled");var s=document.createElementNS("http://www.w3.org/2000/svg","g"),t=(s.classList.add("ozarqaAxis"),s.setAttribute("transform","translate(30 30)"),this.svg.appendChild(s),document.createElementNS("http://www.w3.org/2000/svg","line")),t=(t.setAttribute("x1",0),t.setAttribute("y1",this.height),t.setAttribute("x2",this.width),t.setAttribute("y2",this.height),t.setAttribute("stroke","#787878"),t.setAttribute("stroke-width","1"),s.appendChild(t),document.createElementNS("http://www.w3.org/2000/svg","line"));t.setAttribute("x1",0),t.setAttribute("y1",0),t.setAttribute("x2",0),t.setAttribute("y2",this.height),t.setAttribute("stroke","#787878"),t.setAttribute("stroke-width","1"),s.appendChild(t);for(let t=0;t<this.maxAllValueX;t+=Math.round(this.maxAllValueX/this.args.axisScaleUnit)){var i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("x",t*this.xScale),i.setAttribute("y",this.height+15),i.setAttribute("text-anchor","middle"),i.setAttribute("fill","#787878"),i.textContent=t.toString(),s.appendChild(i)}for(let t=0;t<=this.maxAllValueY;t+=Math.round(this.maxAllValueY/this.args.axisScaleUnit)){var a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("x",-5),a.setAttribute("y",this.height-t*this.yScale),a.setAttribute("text-anchor","end"),a.setAttribute("alignment-baseline","middle"),a.setAttribute("fill","#787878"),a.textContent=t.toString(),s.appendChild(a)}}return}}class OzarqaPieChart{constructor(t,e,s){this.container=e.helpers.container,this.args=e,this.svg=t,this.data=s,this.dataValues=this.data.map(function(t){return t.value})}draw(){var e=this.dataValues.reduce((t,e)=>t+e,0);let s=0;var i=this.args.canvas.width/2,a=this.args.canvas.height/2,r=Math.min(i,a);for(let t=0;t<this.data.length;t++){var h=2*Math.PI*this.data[t].value/e,l=document.createElementNS("http://www.w3.org/2000/svg","path"),n=i+r*Math.cos(s+h),o=a+r*Math.sin(s+h),d=h>Math.PI?1:0,d=`M ${i} ${a}
                        L ${i+r*Math.cos(s)} ${a+r*Math.sin(s)}
                        A ${r} ${r} 0 ${d} 1 ${n} ${o}
                        Z`,n=(l.setAttribute("d",d),l.setAttribute("fill",this.data[t].color),this.svg.appendChild(l),i+r/2*Math.cos(s+h/2)),o=a+r/2*Math.sin(s+h/2),d=document.createElementNS("http://www.w3.org/2000/svg","text");d.setAttribute("x",n),d.setAttribute("y",o),d.setAttribute("fill",this.data[t].labelColor),d.setAttribute("text-anchor","middle"),d.textContent=this.data[t].label.toString(),this.svg.appendChild(d),s+=h}}}class Ozarqa{constructor(t,e){if(void 0===(t={showGuide:!1,barShowHorizintalLines:!1,horizintalLinesColors:"#ccc",barHideAxis:!1,barHideLabel:!1,axisScaleUnit:5,barSpacing:0,...t}).selector)console.warn("Missing selector parameter.");else if(void 0===t.chartType)console.warn("Missing chartType parameter.");else if(void 0===e)console.warn("Missing data parameter.");else if(0===typeof e.length)console.warn("data empty.");else{var s=t.selector.slice(0,1),i=t.selector.substring(1);switch(s){case"#":this.container=document.getElementById(i),this.svg=document.getElementById(i);break;case".":this.container=document.getElementsByClassName(i);break;default:this.container=document.querySelectorAll(t.svgId)}void 0!==this.container[0]&&(this.container=this.container[0]);s=document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.setAttribute("id","ozarqa-"+i),this.container.innerHTML="",this.container.appendChild(s),this.container.classList.add("ozarqa-container"),this.container.classList.add("ozarqa-container-"+t.chartType),this.container.setAttribute("data-id","ozarqa-"+i),this.container.classList.add("ozarqa-selector-"+i),t.helpers={},t.helpers.container=this.container,this.svg=document.getElementById("ozarqa-"+i),this.args=t,this.data=e,this.resizeObserver=new ResizeObserver(this.run.bind(this)),this.resizeObserver.observe(this.svg),this.run(),window.addEventListener("resize",this.run.bind(this)),this.args.showGuide){var a=document.createElement("div");a.setAttribute("class","ozarqa-guide"),this.container.appendChild(a);for(let t=0;t<this.data.length;t++){var r=this.data[t],h=document.createElement("div");h.setAttribute("class","ozarqa-guide-item"),h.style.backgroundColor=r.color,h.style.color=r.guideTextColor,h.innerHTML=r.label,a.appendChild(h)}}}}run(){switch(this.args.canvas={width:args.barHideAxis?this.svg.clientWidth:this.svg.clientWidth-60,height:args.barHideAxis?this.svg.clientHeight:this.svg.clientHeight-60},this.svg.innerHTML="",this.svg.classList.add("ozarqa"),this.svg.classList.add("ozarqa_"+this.args.chartType),this.args.chartType){case"lines":new OzarqaLinesChart(this.svg,this.args,this.data).draw();break;case"bars":new OzarqaBarsChart(this.svg,this.args,this.data).draw();break;case"bubbles":new OzarqaBubblesChart(this.svg,this.args,this.data).draw();break;case"pie":this.args.canvas={width:(args.barHideAxis,this.svg.clientWidth),height:(args.barHideAxis,this.svg.clientWidth)},this.svg.setAttribute("height",this.args.canvas.width),new OzarqaPieChart(this.svg,this.args,this.data).draw()}}}